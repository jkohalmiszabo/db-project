{% extends "base.html" %}
{% block content %}

  <h2 style="margin-top:0;">Offizielle Warteliste</h2>
  <div class="legend">
    <div class="legend-color"></div>
    <div>Eigene Patienten</div>
  </div>


  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Vorname</th>
        <th>Name</th>
        <th>Arzt-Id</th>
        <th>Alterskategorie</th>
        <th>Organ</th>
        <th>Blutgruppe</th>
        <th>
          Dringlichkeit
          <span class="glyphicon glyphicon-info-sign"
                data-toggle="tooltip"
                title="Die Dringlichkeit (1–10) erhöht sich jeweils nach 30 Tagen Warten um eins, für eine gerechte Zuteilung.">
          </span>
        </th>

        <th>Eingabedatum</th>
      </tr>
    </thead>

    <tbody>
      {% for row in waiting %}
        <tr class="{% if row.owner_user_id == current_user.id %}mine{% endif %}">
          <td>{{ row.vorname }}</td>
          <td>{{ row.nachname }}</td>
          <td>{{ row.arztid }}</td>
          <td>{{ row.alterskategorie }}</td>
          <td>{{ row.organ }}</td>
          <td>{{ row.blutgruppe }}</td>
          <td>
            {{ row.dringlichkeit }}
            {% set bonus = row.effektive_dringlichkeit - row.dringlichkeit %}
            {% if bonus > 0 %}
              + {{ bonus }}
            {% endif %}
          </td>


          <td>{{ row.eingabedatum }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

{% endblock %}
